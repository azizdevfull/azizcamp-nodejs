<!DOCTYPE html>
<html lang="en">
  <!-- THE HEAD TAG PARTIAL -->
  <%- include("../partials/head") %>

  <body>
    <!-- THE HEADER TAG PARTIAL -->
    <%- include("../partials/header") %>
    <h1>Attachments</h1>

    <h1>Add Attachment to <%= project.name %></h1>

    <form action="/projects/<%= project._id %>/attachments" method="POST" enctype="multipart/form-data">
      <div>
        <label for="file">Choose file:</label>
        <input type="file" id="file" name="file" required>
      </div>
      <button type="submit">Upload</button>
    </form>
    <br>
    <a href="/projects/<%= project._id %>">Back to project</a>
<br>
    
    <% if (attachments.length === 0) { %>
      <p>No attachments yet.</p>
    <% } else { %>
      <ul>
        <% attachments.forEach((attachment) => { %>
          <li><a href="/projects/<%= project._id %>/attachments/<%= attachment._id %>/download"><%= attachment.filename %></a></li>
          <li>
            <form action="/projects/<%= project._id %>/attachments/<%= attachment._id %>?_method=delete" method="post">
              <input class="button" type="submit" value="Delete Attachment" />
            </form>
          </li>
        <% }) %>
      </ul>
    <% } %>
    
    <%- include("../partials/footer") %>
  </body>
</html>
